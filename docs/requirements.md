Stock Harvest AI - 要件定義書

要件定義の作成原則
- **「あったらいいな」は絶対に作らない**
- **拡張可能性のための余分な要素は一切追加しない**
- **将来の「もしかして」のための準備は禁止**
- **今、ここで必要な最小限の要素のみ**

## 1. プロジェクト概要

### 1.1 成果目標
人間には不可能な東証全銘柄（約3,800社）の24時間監視をAIが実行し、投資チャンスを逃さないシステム

### 1.2 成功指標

#### 定量的指標
- 全銘柄スキャン速度：3,800銘柄を5分以内で分析完了
- 異常検知精度：出来高急増・価格急変を99%以上検出
- 情報圧縮率：3,800銘柄から注目すべき10-20銘柄に絞り込み
- 見逃し率：重要なシグナルの見逃しを1%未満に抑制

#### 定性的指標
- 「もう相場を見続ける必要がない」安心感
- 「AIが24時間監視してくれている」という信頼感
- 「本当に重要な銘柄だけに集中できる」効率性
- 「人間では気づけないパターンを発見できる」発見性

## 2. システム全体像

### 2.1 主要機能一覧 (草田さん優先度A機能のみ)
- **ロジックスキャナー機能**: ロジックA(ストップ高張り付き)とロジックB(赤字→黒字転換)の検出
- **チャート表示機能**: 各ロジックで検出した銘柄のチャート表示
- **手動決済シグナル**: 損切り・利確タイミングの通知と決済実行
- **アラート機能**: 価格到達アラートとLINE通知
- **問合せ機能**: システムサポートと技術的質問

### 2.2 ユーザーロールと権限
- 個人ユーザー: 全機能へのフルアクセス（認証なし）

### 2.3 認証・認可要件
- 認証方式: 当面は認証なし（ローカル環境での個人利用）
- セキュリティレベル: APIキー等は環境変数で管理
- 管理機能: 不要（将来的に拡張可能な設計）

## 3. ページ詳細仕様 (優先度A機能のみ、3ページ構成)

### 3.1 P-001: ロジックスキャナーダッシュボード
実装済み: ダッシュボード基本機能、スキャン実行、ロジック結果表示、システム状態表示

### 3.2 P-002: アラート設定  
実装済み: アラート作成・一覧・切替・削除、LINE通知設定画面

### 3.3 P-003: 問合せサポート
実装済み: FAQ表示、問合せフォーム、システム情報表示

## 4. データ設計
実装済み: 全テーブル定義完了（詳細はbackend/src/database/tables.py参照）
- system_info, faq, alerts, line_notification_config
- contact_inquiries, scan_executions, scan_results
- stock_master, manual_signals

## 5. 制約事項

### 外部API制限
- **Yahoo Finance**: アクセス頻度制限あり（詳細は非公開）
- **LINE Notify**: 1000件/月の送信制限

### 技術的制約
- **リアルタイムデータ**: 20分遅延（無料API使用時）
- **スキャン頻度**: 5分に1回が現実的な上限

## 6. APIエンドポイント
実装済み: 全主要エンドポイント実装完了
- スキャン機能: `/api/scan/execute`, `/api/scan/status`, `/api/scan/results`
- アラート機能: `/api/alerts/*`, `/api/notifications/line/*`
- サポート機能: `/api/contact/*`, `/api/system/*`
- 決済シグナル: `/api/signals/*`
- チャート機能: `/api/charts/*`

## 7. 技術スタック (実装済み)
- **フロントエンド**: React 19.1, TypeScript 5.9, MUI v7, Recharts 3.3, Zustand 5.0
- **バックエンド**: Python 3.11+, FastAPI 0.104.1, yfinance, pandas, ta-lib  
- **データベース**: PostgreSQL (完全実装済み)
- **テスト**: Playwright 1.56.1 (98項目 100%実装済み)
- **デプロイ**: Vercel対応済み

## 8. 必要な外部サービス・アカウント

### 必須サービス
| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| Yahoo Finance | 株価データ取得 | pip install yfinance | 無料 |
| Neon | データベース | https://neon.tech | 無料枠あり |
| LINE Notify | アラート通知 | https://notify-bot.line.me | 無料 |

### オプションサービス
| サービス名 | 用途 | 取得先 | 備考 |
|-----------|------|--------|------|
| OpenAI API | AI分析レポート生成 | https://openai.com | 月$20程度 |

## 9. 今後の拡張予定
- 米国株対応
- 投資信託・ETF対応
- 複数ユーザー対応（認証機能追加）
- モバイルアプリ化

---