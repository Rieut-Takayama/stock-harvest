# P-002: アラート設定 E2Eテスト仕様書

生成日: 2025-11-08
対象ページ: /alerts
テスト環境: モック実装
作成者: E2Eテスト仕様書作成エージェント

## 概要
- 総テスト項目数: 31項目
- 高優先度: 16項目
- 中優先度: 12項目
- 低優先度: 3項目

## テスト項目一覧

| No | テストID | テスト項目 | 依存テストID | 機能分類 | テスト分類 | 優先度 | 確認内容 | テストデータ/手順 | 期待結果 | 実施日 | 結果 | 備考 |
|----|---------|----------|------------|---------|-----------|--------|---------|------------------|----------|--------|------|------|
| 1 | E2E-ALRT-001 | アラートページアクセス | なし | 表示 | 正常系 | 高 | ページ表示 | /alertsアクセス | アラート設定ページ表示 | | | |
| 2 | E2E-ALRT-002 | ローディング状態表示 | なし | 表示 | 正常系 | 高 | 初期ローディング | ページアクセス時の初期状態 | CircularProgress表示 | | | |
| 3 | E2E-ALRT-003 | データ取得完了 | E2E-ALRT-002 | 表示 | 正常系 | 高 | 初期データ表示 | ローディング完了後 | 新規作成フォーム・設定済み一覧表示 | | | |
| 4 | E2E-ALRT-004 | 新規アラート作成フォーム | E2E-ALRT-003 | 表示 | 正常系 | 高 | フォーム要素確認 | フォームセクション確認 | アラートタイプ・銘柄コード・目標価格フィールド | | | |
| 5 | E2E-ALRT-005 | アラートタイプ選択 | E2E-ALRT-004 | 機能 | 正常系 | 高 | セレクトボックス | アラートタイプクリック | 価格到達・ロジック発動選択肢表示 | | | |
| 6 | E2E-ALRT-006 | 価格アラート選択 | E2E-ALRT-005 | 機能 | 正常系 | 高 | 価格フィールド表示 | 「価格到達アラート」選択 | 目標価格フィールド表示・有効化 | | | |
| 7 | E2E-ALRT-007 | ロジックアラート選択 | E2E-ALRT-005 | 機能 | 正常系 | 中 | 価格フィールド非表示 | 「ロジック発動アラート」選択 | 目標価格フィールド非表示 | | | |
| 8 | E2E-ALRT-008 | 銘柄コード入力 | E2E-ALRT-006 | 機能 | 正常系 | 高 | テキスト入力 | 銘柄コード「7203」入力 | 入力値「7203」表示 | | | |
| 9 | E2E-ALRT-009 | 目標価格入力 | E2E-ALRT-008 | 機能 | 正常系 | 高 | 数値入力 | 目標価格「3000」入力 | 入力値「3000」表示 | | | |
| 10 | E2E-ALRT-010 | 価格アラート作成実行 | E2E-ALRT-009 | 機能 | 正常系 | 高 | アラート作成 | 「アラート作成」ボタンクリック | 成功通知・フォームリセット・一覧更新 | | | |
| 11 | E2E-ALRT-011 | ロジックアラート作成実行 | E2E-ALRT-007 | 機能 | 正常系 | 中 | ロジックアラート作成 | 銘柄入力後作成実行 | 成功通知・フォームリセット・一覧更新 | | | |
| 12 | E2E-ALRT-012 | 設定済みアラート一覧表示 | E2E-ALRT-010 | 表示 | 正常系 | 高 | 一覧表示 | アラート作成後 | 銘柄名・条件・状態表示 | | | |
| 13 | E2E-ALRT-013 | アラート有効/無効切り替え | E2E-ALRT-012 | 機能 | 正常系 | 高 | スイッチ操作 | アラートスイッチクリック | 状態切り替え・表示更新 | | | |
| 14 | E2E-ALRT-014 | アラート削除確認 | E2E-ALRT-012 | 機能 | 正常系 | 中 | 削除確認ダイアログ | 削除ボタンクリック | 削除確認ダイアログ表示 | | | |
| 15 | E2E-ALRT-015 | アラート削除実行 | E2E-ALRT-014 | 機能 | 正常系 | 中 | 削除実行 | 確認ダイアログで「OK」 | アラート削除・成功通知・一覧更新 | | | |
| 16 | E2E-ALRT-016 | アラート削除キャンセル | E2E-ALRT-014 | 機能 | 正常系 | 低 | 削除キャンセル | 確認ダイアログで「キャンセル」 | ダイアログ閉じる・削除なし | | | |
| 17 | E2E-ALRT-017 | LINE通知設定表示 | E2E-ALRT-003 | 表示 | 正常系 | 中 | LINE設定セクション | ページ下部確認 | LINE通知設定セクション表示 | | | |
| 18 | E2E-ALRT-018 | LINE連携状態表示 | E2E-ALRT-017 | 表示 | 正常系 | 中 | 連携状態確認 | LINE設定セクション確認 | 連携済み/未連携アイコン・ステータス表示 | | | |
| 19 | E2E-ALRT-019 | 必須項目未入力エラー | E2E-ALRT-005 | バリデーション | 異常系 | 高 | 銘柄コード空欄 | 銘柄コード空でアラート作成 | 「銘柄コードを入力してください」エラー通知 | | | |
| 20 | E2E-ALRT-020 | 価格未入力エラー | E2E-ALRT-006 | バリデーション | 異常系 | 高 | 目標価格空欄 | 価格アラートで目標価格空 | 「目標価格を入力してください」エラー通知 | | | |
| 21 | E2E-ALRT-021 | アラート作成失敗エラー | E2E-ALRT-009 | エラー | 異常系 | 中 | API通信エラー | ネットワーク切断状態で作成 | 「アラートの作成に失敗しました」エラー通知 | | | |
| 22 | E2E-ALRT-022 | アラート切り替え失敗エラー | E2E-ALRT-013 | エラー | 異常系 | 中 | スイッチエラー | API通信エラー時 | 「アラートの切り替えに失敗しました」エラー | | | |
| 23 | E2E-ALRT-023 | アラート削除失敗エラー | E2E-ALRT-015 | エラー | 異常系 | 中 | 削除エラー | API通信エラー時 | 「アラートの削除に失敗しました」エラー | | | |
| 24 | E2E-ALRT-024 | アラート一覧空状態 | E2E-ALRT-003 | 表示 | 異常系 | 低 | 空データ表示 | アラートなし状態 | 「設定済みのアラートがありません」表示 | | | |
| 25 | E2E-ALRT-025 | 成功通知表示 | E2E-ALRT-010 | 表示 | 正常系 | 中 | 通知表示確認 | アラート作成成功時 | 右上に成功Snackbar表示 | | | |
| 26 | E2E-ALRT-026 | 通知自動消失 | E2E-ALRT-025 | 表示 | 正常系 | 低 | 通知消失 | 通知表示3秒後 | Snackbar自動で非表示 | | | |
| 27 | E2E-ALRT-027 | デスクトップ表示 | E2E-ALRT-001 | レスポンシブ | レスポンシブ | 高 | PC表示確認 | 1920x1080で表示 | レイアウト適切・全要素表示 | | | |
| 28 | E2E-ALRT-028 | タブレット表示 | E2E-ALRT-001 | レスポンシブ | レスポンシブ | 中 | タブレット表示確認 | 768x1024で表示 | レイアウト調整・操作可能 | | | |
| 29 | E2E-ALRT-029 | モバイル表示 | E2E-ALRT-001 | レスポンシブ | レスポンシブ | 中 | スマホ表示確認 | 375x667で表示 | レイアウト調整・タッチ操作可能 | | | |
| 30 | E2E-ALRT-030 | アラート条件表示形式 | E2E-ALRT-012 | 表示 | 正常系 | 低 | 条件フォーマット | アラート一覧で条件確認 | 価格:「価格が¥3,000を上回ったら通知」形式 | | | |
| 31 | E2E-ALRT-031 | フォーム操作ワークフロー | E2E-ALRT-004 | ワークフロー | ワークフロー | 高 | 全体フロー確認 | アラートタイプ選択→入力→作成→一覧確認 | 一連の操作が正常完了 | | | |

## テスト分類別カバレッジ
- 正常系: 18項目
- 異常系: 7項目
- セキュリティ: 0項目（認証なし）
- レスポンシブ: 3項目
- ワークフロー: 1項目

## API呼び出し一覧
| No | メソッド | エンドポイント | 用途 | テストID |
|----|---------|--------------|------|----------|
| 1 | GET | /api/alerts | アラート一覧取得 | E2E-ALRT-002,003,012 |
| 2 | GET | /api/notifications/line | LINE通知設定取得 | E2E-ALRT-003,017,018 |
| 3 | POST | /api/alerts | アラート作成 | E2E-ALRT-010,011 |
| 4 | PUT | /api/alerts/{id}/toggle | アラート有効/無効切り替え | E2E-ALRT-013 |
| 5 | DELETE | /api/alerts/{id} | アラート削除 | E2E-ALRT-015 |

## 優先度別実施順序
1. **高優先度(必須)**: E2E-ALRT-001,002,003,004,005,006,008,009,010,012,013,019,020,027,031
2. **中優先度(推奨)**: E2E-ALRT-007,011,014,015,017,018,021,022,023,025,028,029
3. **低優先度(任意)**: E2E-ALRT-016,024,026,030

## 前提条件
- テストアカウント:
  - 認証なし（個人利用）
- モックデータ:
  - 既存アラート: 7203(トヨタ自動車)、LOGIC_A(ロジックA)
  - LINE連携: 済み（isConnected: true）

## テスト環境設定
- ブラウザ: Chrome最新版
- 解像度:
  - デスクトップ: 1920x1080
  - タブレット: 768x1024  
  - モバイル: 375x667
- ネットワーク: 通常速度・切断テスト可能

## バリデーションルール
- 銘柄コード: 必須、文字列
- 目標価格: 価格アラート時必須、正数
- アラートタイプ: 必須、「price」または「logic」

## 注意事項
- アラート作成は300msのモック遅延あり
- LINE通知設定は表示のみ（設定変更なし）
- 銘柄名は銘柄コードから自動取得（モック）
- 削除確認はwindow.confirmを使用