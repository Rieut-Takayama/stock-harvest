<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ - Stock Harvest AI</title>
    <link rel="stylesheet" href="../src/css/base.css">
    <link rel="stylesheet" href="../src/css/backtest.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">ğŸ“Š</span>
                    <h1>Stock Harvest AI</h1>
                </div>
                <nav class="nav">
                    <a href="../index.html" class="nav-link">
                        <span class="material-icons">dashboard</span>
                        ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                    </a>
                    <a href="stock-detail.html" class="nav-link">
                        <span class="material-icons">analytics</span>
                        éŠ˜æŸ„åˆ†æ
                    </a>
                    <a href="portfolio.html" class="nav-link">
                        <span class="material-icons">account_balance_wallet</span>
                        ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ª
                    </a>
                    <a href="alerts.html" class="nav-link">
                        <span class="material-icons">notifications</span>
                        ã‚¢ãƒ©ãƒ¼ãƒˆ
                    </a>
                    <a href="backtest.html" class="nav-link active">
                        <span class="material-icons">history</span>
                        ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆ
                    </a>
                </nav>
            </div>
        </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main">
        <div class="container">
            <!-- ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆè¨­å®š -->
            <div class="backtest-setup card">
                <h2>AIã‚·ã‚°ãƒŠãƒ«ã®éå»æ¤œè¨¼</h2>
                <div class="setup-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label>æ¤œè¨¼æœŸé–“</label>
                            <select class="form-control">
                                <option>éå»1ãƒ¶æœˆ</option>
                                <option>éå»3ãƒ¶æœˆ</option>
                                <option selected>éå»6ãƒ¶æœˆ</option>
                                <option>éå»1å¹´</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>æŠ•è³‡é‡‘é¡</label>
                            <input type="number" class="form-control" value="1000000" step="100000">
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg" onclick="runBacktest()">
                        <span class="material-icons">play_arrow</span>
                        æ¤œè¨¼é–‹å§‹
                    </button>
                </div>
            </div>

            <!-- æ¤œè¨¼çµæœã‚µãƒãƒªãƒ¼ -->
            <div class="results-summary card" id="results" style="display: none;">
                <h3>æ¤œè¨¼çµæœ</h3>
                <div class="summary-grid">
                    <div class="result-item">
                        <div class="result-label">æœ€çµ‚æç›Š</div>
                        <div class="result-value positive">+Â¥156,800</div>
                        <div class="result-rate positive">+15.7%</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">å‹ç‡</div>
                        <div class="result-value">68%</div>
                        <div class="result-detail">34å‹ / 16æ•—</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">æœ€å¤§ãƒ‰ãƒ­ãƒ¼ãƒ€ã‚¦ãƒ³</div>
                        <div class="result-value">-8.2%</div>
                        <div class="result-detail">ãƒªã‚¹ã‚¯ç®¡ç†è‰¯å¥½</div>
                    </div>
                    <div class="result-item">
                        <div class="result-label">å¹³å‡ä¿æœ‰æœŸé–“</div>
                        <div class="result-value">12æ—¥</div>
                        <div class="result-detail">çŸ­ä¸­æœŸãƒˆãƒ¬ãƒ¼ãƒ‰</div>
                    </div>
                </div>
            </div>

            <!-- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ£ãƒ¼ãƒˆ -->
            <div class="performance-graph card" id="chart" style="display: none;">
                <h3>è³‡ç”£æ¨ç§»ã‚°ãƒ©ãƒ•</h3>
                <div class="chart-placeholder">
                    <div style="height: 400px; background: #f5f5f5; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: #999;">
                        ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ£ãƒ¼ãƒˆ
                    </div>
                </div>
            </div>

            <!-- ãƒˆãƒ¬ãƒ¼ãƒ‰å±¥æ­´ -->
            <div class="trade-history card" id="history" style="display: none;">
                <h3>ä¸»è¦ãƒˆãƒ¬ãƒ¼ãƒ‰å±¥æ­´</h3>
                <div class="history-table">
                    <table>
                        <thead>
                            <tr>
                                <th>éŠ˜æŸ„</th>
                                <th>ã‚¨ãƒ³ãƒˆãƒªãƒ¼</th>
                                <th>ã‚¤ã‚°ã‚¸ãƒƒãƒˆ</th>
                                <th>ä¿æœ‰æœŸé–“</th>
                                <th>æç›Š</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="trade-win">
                                <td>7203 ãƒˆãƒ¨ã‚¿</td>
                                <td>Â¥2,680</td>
                                <td>Â¥2,845</td>
                                <td>8æ—¥</td>
                                <td class="positive">+6.2%</td>
                            </tr>
                            <tr class="trade-win">
                                <td>6758 ã‚½ãƒ‹ãƒ¼G</td>
                                <td>Â¥12,450</td>
                                <td>Â¥13,100</td>
                                <td>15æ—¥</td>
                                <td class="positive">+5.2%</td>
                            </tr>
                            <tr class="trade-loss">
                                <td>9984 ã‚½ãƒ•ãƒˆãƒãƒ³ã‚¯</td>
                                <td>Â¥6,100</td>
                                <td>Â¥5,920</td>
                                <td>5æ—¥</td>
                                <td class="negative">-3.0%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ãƒ¬ãƒãƒ¼ãƒˆãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ -->
            <div class="report-actions" id="actions" style="display: none;">
                <button class="btn btn-outline" onclick="downloadReport()">
                    <span class="material-icons">description</span>
                    è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                </button>
            </div>
        </div>
    </main>

    <script>
        function runBacktest() {
            const button = event.target.closest('button');
            button.innerHTML = '<span class="loading"></span> æ¤œè¨¼ä¸­...';
            button.disabled = true;
            
            // 2ç§’å¾Œã«çµæœã‚’è¡¨ç¤º
            setTimeout(() => {
                button.innerHTML = '<span class="material-icons">play_arrow</span> æ¤œè¨¼é–‹å§‹';
                button.disabled = false;
                
                // çµæœã‚’è¡¨ç¤º
                document.getElementById('results').style.display = 'block';
                document.getElementById('chart').style.display = 'block';
                document.getElementById('history').style.display = 'block';
                document.getElementById('actions').style.display = 'block';
                
                // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                document.getElementById('results').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                
                showNotification('ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆå®Œäº†ï¼AIã‚·ã‚°ãƒŠãƒ«ã¯è‰¯å¥½ãªæˆç¸¾ã§ã™ã€‚');
            }, 2000);
        }
        
        function downloadReport() {
            showNotification('è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆï¼ˆPDFï¼‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ');
        }
        
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #1976d2;
                color: white;
                padding: 16px 24px;
                border-radius: 8px;
                box-shadow: 0 3px 6px rgba(0,0,0,0.15);
                z-index: 1000;
                animation: slideIn 0.3s ease;
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>